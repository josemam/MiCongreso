<!doctype html>
<html>
   <head>

      <meta charset="UTF-8">
      <title>MiCongreso</title>
      <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
      <script type="text/javascript" src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>
      <script type="text/javascript" src="https://d3js.org/topojson.v1.min.js"></script>
      <script type="text/javascript" src="metodos_escanos.js"></script>
      <script type="text/javascript" src="script.js"></script>
      <link rel="stylesheet" type="text/css" href="style.css">
      <link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css?family=PT Sans:700'>
      <link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css?family=Lato:900'>
      <link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css?family=Roboto Slab'>
 
   </head>
   <body>
      <div id="titulo">
         <h1>MiCongreso</h1>
      </div>
      <div id="tooltip"><span id="contenido"></span></div>
      <div id="grafico"></div>
      <div id="derecha_grafico">
         <textarea id="res_texto" READONLY rows="13"></textarea>

         <div id="controles">
            Resultados del <select id="elecciones" size=1 onChange="leerdatos(this.value)">
               <option value=espana_2008>09/03/2008</option>
               <option value=espana_2011>20/11/2011</option>
               <option value=espana_2015 selected="selected">20/12/2015</option>
            </select><br>
            
            <input id="minimo" value="2" size="1" onChange="procesa()" title="Mínimo de escaños por provincia (por comunidad autónoma si la circunscripción es del tipo Comunidad 1)"> escaños/circ
            hasta <input id="total_diputados" value="350" size="2" onChange="procesa()" title="Total de escaños">
            Método:
            <select id="sel_metodo" size=1 onChange="procesa()"> 
               <option value=dhondt>D'Hondt</option>
               <option value=droop title="Método del resto mayor con cociente Droop">Droop</option>
               <option value=hare title="Método del resto mayor con cociente Hare">Hare</option>
               <option value=saintelague>Sainte-Laguë</option>
               <option value=escanocadacincuentamil title="Un escaño por cada cincuenta mil votos en una circunscripción. Ignora el reparto de escaños.">Votos/50 000</option>
               <option value=muestreoaleatorio title="Por cada circunscripción, toma tantos votos (no nulos ni en blanco) al azar como escaños tenga asignados, y cada partido votado recibe un escaño.">Muestreo</option>
            </select><br>

            Circunscrip.:
            <select id="sel_circ" size=1 onChange="procesa()"> 
               <option value="provincia">Provincia</option>
               <option value="comunidad" title="Se juntan los votos de cada provincia en la comunidad autónoma y el número de escaños por comunidad se calcula a partir del censo total de la comunidad.">Comunidad 1</option>
               <option value="comunidad_mix" title="Se juntan los votos de cada provincia en la comunidad autónoma, pero el número de escaños de la comunidad es la suma de los escaños de cada provincia.">Comunidad 2</option>
               <option value="unica" title="Se juntan todos los votos en una sola circunscripción para todo el país.">Única</option>
            </select><br>
            Corte:
            <input id="corte" value="3" size="1" onChange="procesa()" title="Los partidos con un porcentaje de votos menor en una circunscripción serán ignorados en el reparto de escaños de esa circunscripción.">%
            Unir Podemos
            <input type="checkbox" id="pod_conf" onChange="procesa()"><br>
            Unir Podemos+IU
            <input type="checkbox" id="iu_pod" onChange="procesa()">
         </div>
      </div>
      <div id="mapa"></div>
      <p>
         ¿En qué influye la ley electoral? ¿Cómo habría quedado el Congreso de los
         Diputados tras el 20 de Diciembre si nuestra ley fuese otra? ¡Compruébalo
         tú mismo! ¡Selecciona una asignación de escaños por provincia, un método
         de reparto de escaños, el ámbito de cada circunscripción y el mínimo de
         votos necesarios para acceder al reparto, y mira cómo fluctua el Parlamento!<br><br>
         
         Si marcas 'Unir Podemos', se considerará que Podemos y todas las
         confluencias en las que participa Podemos (En Comú, Compromís-Podemos y
         En Marea) son el mismo partido. En circunscripción única, marcar o no esta
         casilla puede afectar al reparto de escaños de todos los partidos. En otro
         caso, solo tiene el efecto de mostrar los escaños de Podemos y partidos
         relacionados en un solo bloque. ¡Recuerda que Izquierda Unida también
         participa en En comú y En Marea!<br><br>
         
         Nota: Los resultados suponen que los votos son los mismos, pero cambiar
         la ley electoral puede alterar el enfoque que los partidos dan a la
         campaña electoral, las uniones de partidos, e incluso la perspectiva de
         los electores, alterando profundamente los resultados.<br><br>
         
         <a href="https://github.com/josemam/MiCongreso">Código fuente aquí</a>
      </p>
   </body>
</html>
